{
    "name": "qt4",
    "config-opts": [
        "-verbose",
        "-confirm-license",
        "-opensource",
        "-release",
        "-shared",
        "-no-static",
        "-fast",
        "-datadir", "/app/lib/qt4",
        "-importdir", "/app/lib/qt4/imports",
        "-plugindir", "/app/lib/qt4/plugins",
        "-translationdir", "/app/share/qt4/translations",
        "-accessibility",
        "-exceptions",
        "-fontconfig",
        "-glib",
        "-dbus-linked",
        "-openssl-linked",
        "-optimized-qmake",
        "-system-libjpeg",
        "-system-libpng",
        "-system-libtiff",
        "-system-proxies",
        "-system-zlib",
        "-nomake", "demos",
        "-nomake", "docs",
        "-nomake", "examples"
    ],
    "build-options": {
        "env": {
            "CXXFLAGS": "-std=gnu++11 -O2",
            "LD_LIBRARY_PATH": "/run/build/qt4/lib/"
        }
    },
    "sources": [
        {
            "type": "archive",
            "url": "https://download.qt.io/archive/qt/4.8/4.8.6/qt-everywhere-opensource-src-4.8.6.tar.gz",
            "sha256": "8b14dd91b52862e09b8e6a963507b74bc2580787d171feda197badfa7034032c"
        },
        {
            "type": "patch",
            "path": "fixgcc9.patch"
        },
        {
            "type": "patch",
            "path": "fixgcc11.patch"
        },
        {
            "type": "shell",
            "commands": [
                "sed -i \"s|-O2|${CXXFLAGS}|\" mkspecs/common/{g++,gcc}-base.conf",
                "sed -i \"/^QMAKE_LFLAGS_RPATH/s| -Wl,-rpath,||g\" mkspecs/common/gcc-base-unix.conf",
                "sed -i \"/^QMAKE_LFLAGS\s/s|+=|+= ${LDFLAGS}|g\" mkspecs/common/gcc-base.conf"
            ]
        }
    ],
    "cleanup": [
        "/bin",
        "/include",
        "/lib/*.a",
        "/lib/*.la",
        "/lib/*.prl",
        "/lib/pkgconfig",
        "/lib/qt4/mkspecs",
        "/lib/qt4/q3porting.xml"
    ]
}
